<div class="dashboard-container">
  <header class="header">
    <div class="header-content">
      <h1>Weather Dashboard</h1>
      <div class="user-info">
        <span>Welcome, {{ user()?.username }}!</span>
        <button class="btn-logout" (click)="logout()">Logout</button>
      </div>
    </div>
  </header>

  <main class="main-content">
    <div class="search-section">
      <div class="search-box">
        <input
          type="text"
          [ngModel]="city()" (ngModelChange)="city.set($event)"
          
          placeholder="Enter city name"
          (keyup.enter)="onSearch()"
        />
        <button class="btn-search" (click)="onSearch()" [disabled]="loading()">
          {{ loading() ? 'Loading...' : 'Search' }}
        </button>
      </div>
    </div>

    <div class="error-message" *ngIf="error()">
      {{ error() }}
    </div>

    <div class="weather-section" *ngIf="weatherData()">
      <div class="weather-card">
        <h2>{{ weatherData()!.city }}<span *ngIf="weatherData()!.country">, {{ weatherData()!.country }}</span></h2>
        <div class="temperature" *ngIf="weatherData()!.currentTemperature !== undefined">
          {{ weatherData()!.currentTemperature }}Â°C
        </div>
        <div class="description" *ngIf="weatherData()!.adminRegion">{{ weatherData()!.adminRegion }}</div>
        
        <div class="weather-details">
          <div class="detail-item" *ngIf="weatherData()!.currentRelativeHumidity !== undefined">
            <span class="detail-label">Humidity</span>
            <span class="detail-value">{{ weatherData()!.currentRelativeHumidity }}%</span>
          </div>
          <div class="detail-item" *ngIf="weatherData()!.currentWindSpeed !== undefined">
            <span class="detail-label">Wind Speed</span>
            <span class="detail-value">{{ weatherData()!.currentWindSpeed }} km/h</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Coordinates</span>
            <span class="detail-value">{{ weatherData()!.latitude }}, {{ weatherData()!.longitude }}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="map-section" [class.map-visible]="!!weatherData()">
      <div id="weather-map"></div>
    </div>
  </main>
</div>
